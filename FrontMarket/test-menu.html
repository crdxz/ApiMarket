<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Test Menu - Marketplace</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/utilities.css" />
  <link rel="stylesheet" href="css/main.css" />
  <style>
    body {
      padding: 2rem;
      background: var(--background-color);
    }
    .test-container {
      max-width: 800px;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1 class="text-2xl font-bold mb-8">Test del Menú de Usuario</h1>
    
    <!-- Menú de usuario de prueba -->
    <div class="user-menu">
      <button id="userMenuBtn" class="user-menu-btn">
        <div class="user-avatar" id="userAvatar">U</div>
        <span id="userName">Usuario Test</span>
        <svg class="w-4 h-4 text-[var(--text-secondary)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
        </svg>
      </button>
      <!-- Dropdown -->
      <div id="userMenu" class="user-dropdown">
        <div class="user-info">
          <div class="user-email" id="userEmail">test@example.com</div>
        </div>
        <button id="logoutBtn" class="logout-btn">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
          </svg>
          Cerrar Sesión
        </button>
      </div>
    </div>
    
    <div class="mt-8 p-4 bg-gray-100 rounded-lg">
      <h2 class="font-semibold mb-2">Instrucciones:</h2>
      <ul class="list-disc list-inside space-y-1 text-sm">
        <li>Haz clic en el botón "Usuario Test" para abrir/cerrar el menú</li>
        <li>El menú debería aparecer con una animación suave</li>
        <li>Haz clic fuera del menú para cerrarlo</li>
        <li>Haz clic en "Cerrar Sesión" para probar el botón</li>
      </ul>
    </div>
    
    <div class="mt-4 p-4 bg-blue-50 rounded-lg">
      <h2 class="font-semibold mb-2">Debug Info:</h2>
      <div id="debugInfo" class="text-sm text-gray-600">
        Estado del menú: <span id="menuStatus">Cerrado</span>
      </div>
    </div>
  </div>

  <script>
    // Elementos del DOM
    const userMenuBtn = document.getElementById('userMenuBtn');
    const userMenu = document.getElementById('userMenu');
    const logoutBtn = document.getElementById('logoutBtn');
    const menuStatus = document.getElementById('menuStatus');
    const debugInfo = document.getElementById('debugInfo');

    // Funcionalidad del menú de usuario
    userMenuBtn.addEventListener('click', function (e) {
      e.stopPropagation();
      console.log('Botón de usuario clickeado');
      userMenu.classList.toggle('show');
      const isOpen = userMenu.classList.contains('show');
      console.log('Estado del menú:', isOpen);
      menuStatus.textContent = isOpen ? 'Abierto' : 'Cerrado';
    });

    // Cerrar menú al hacer clic fuera
    document.addEventListener('click', function (e) {
      if (!userMenuBtn.contains(e.target) && !userMenu.contains(e.target)) {
        userMenu.classList.remove('show');
        menuStatus.textContent = 'Cerrado';
      }
    });

    logoutBtn.addEventListener('click', function () {
      console.log('Botón de logout clickeado');
      alert('Botón de logout funcionando correctamente!');
    });

    // Prevenir que el clic en el menú lo cierre
    userMenu.addEventListener('click', function (e) {
      e.stopPropagation();
    });

    // Mostrar información de debug
    console.log('Script de prueba cargado');
    console.log('Elementos encontrados:', {
      userMenuBtn: !!userMenuBtn,
      userMenu: !!userMenu,
      logoutBtn: !!logoutBtn
    });
  </script>
</body>
</html> 